21a22,25
> #undef HAVE_LIBREADLINE
> #undef HAVE_READLINE_READLINE_H
> #undef HAVE_READLINE_HISTORY_H
> 
38a43
> FILE* query_file = 0;
254c259
<   buf = fgets(lb->buffer, LINE_SIZE, stdin);
---
>   buf = fgets(lb->buffer, LINE_SIZE, query_file);
355a361,364
>   if (argc != 6 && argc != 4) { fprintf(stderr, "Need 5 or 3 arguments."); return 1; }
>   int interact = (argc==6 ? 1 : 0);
>   int nointeractbias = 0;
>   if (!interact) nointeractbias = -1;
359d367
<   int interact = 0;
368a377
> /*
399c408
<   case 0:			/* Use stdin */
---
>   case 0:			// Use stdin
403a413,414
> */
>     input = argv[4+nointeractbias];
412a424
> /*
423a436
> */
430a444,448
>   lua = argv[3+nointeractbias];
>   if (interact) {
>     query_file = fopen(argv[5+nointeractbias],"r");
>     if (!query_file) { fprintf(stderr, "Can't open query file (argument 5)\n"); return 1; }
>   }
